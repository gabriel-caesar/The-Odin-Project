<!-- views/index.ejs -->
<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB"
      crossorigin="anonymous"
    />
  </head>
  <body class="d-flex flex-column justify-content-center align-items-center">
    <h1 class="mt-3"><%= title %></h1>
    <ul
      style="max-width: 420px; max-height: 500px; width: 100%"
      class="list-group overflow-auto bg-secondary text-light p-4 shadow d-flex flex-column justify-content-start align-items-center"
    >
      <% if (locals.users.length > 0) {%> <% users.forEach(user => { %>
      <li class="list-group-item w-100">
        <div id="name-and-id-container">
          <span class="btn btn-secondary">ID: <%= user.id %></span>
          <p class="text-decoration-underline d-inline">
            <%= user.firstname %> <%= user.lastname %>
          </p>
        </div>
        <p class="m-0 mt-3">
          Email: <%= user.email ? user.email : 'Not provided' %>
        </p>
        <p class="m-0 mt-1">Age: <%= user.age ? user.age : 'Not provided' %></p>
        <p class="m-0 mt-1 mb-3">
          Bio: <%= user.bio ? user.bio : 'Not provided' %>
        </p>
        <div id="buttons-container" class="mt-2">
          <a href="/update/<%= user.id %>" class="btn btn-primary">Update</a>
          <form
            style="display: inline"
            action="/delete/<%= user.id %>"
            method="POST"
          >
            <button
              class="btn btn-danger"
              type="submit"
              onclick='return confirm("Are you sure you want to delete this user?")'
            >
              Delete
            </button>
          </form>
        </div>
      </li>
      <% }); %> <% } else { %>
      <h2>No user was created yet</h2>
      <% } %>
    </ul>
    <a href="/create" class="btn btn-dark mt-3" style="width: 180px"
      >Create a user</a
    >
    <a href="/search" class="btn btn-primary mt-1" style="width: 180px"
      >Search</a
    >
    <a href="/login" class="btn btn-primary mt-1" style="width: 180px">Login</a>
    <form action="/delete" method='POST'>
      <button
        class="btn btn-danger mt-1 mb-5"
        onclick='return confirm("You are about to delete ALL users from the database, are you sure?")'
        style="width: 180px"
      >
        Delete all users
      </button>
    </form>
  </body>
</html>
